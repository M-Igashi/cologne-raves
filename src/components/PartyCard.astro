---
interface Props {
  id?: string;
  title: string;
  venue: string;
  date: string;
  startTime: string;
  artists?: string[];
  url?: string;
}

const {
  id,
  title,
  venue,
  date,
  startTime,
  artists = [],
  url,
} = Astro.props;

// æ—¥ä»˜æ•´å½¢ï¼ˆYYYY-MM-DD â†’ April 8, 2025 ç­‰ï¼‰
import { format, parseISO } from "date-fns";
const formattedDate = format(parseISO(date), "MMMM d, yyyy");

// GitHub ç·¨é›†ãƒªãƒ³ã‚¯
const GITHUB_BASE_EDIT_URL = "https://github.com/M-Igashi/cologne-raves/edit/main/data";
const jsonFilename = `${date.slice(0, 7)}-cologne-${date.slice(8, 10)}.json`;
const githubEditUrl = id ? `${GITHUB_BASE_EDIT_URL}/${jsonFilename}` : null;
---

<article style="border: 1px solid #ccc; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; position: relative;">
  {id && (
    <div style="position: absolute; top: 0.5rem; right: 0.5rem; font-size: 0.7rem; color: #999;">
      #{id}
    </div>
  )}
  <h3 style="margin: 0 0 0.5rem 0;">{title} @ {venue}</h3>
  <p style="margin: 0 0 0.25rem 0;">ðŸ“… {formattedDate} â€“ ðŸ•— {startTime}</p>
  {artists.length > 0 && (
    <p style="margin: 0 0 0.25rem 0;">ðŸŽ§ {artists.join(', ')}</p>
  )}
  {url && (
    <p style="margin: 0 0 0.25rem 0;"><a href={url} target="_blank" rel="noopener">More Info</a></p>
  )}
  {githubEditUrl && (
    <p style="margin: 0;"><a href={githubEditUrl} target="_blank" rel="noopener">ðŸ›  Edit on GitHub</a></p>
  )}
</article>
