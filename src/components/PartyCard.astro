---
import type { Party } from "@/lib/getAllParties";
import { format } from "date-fns";
import { CalendarDays, Clock, MapPin, GitBranch } from "lucide-react";

const { title, date, venue, startTime, artists, url, id, sourceFile } = Astro.props;
const dateObj = new Date(date);
const formattedDate = format(dateObj, "EEE, d MMM yyyy");
---

<article class="rounded-xl border p-4 mb-4">
  <h2 class="font-semibold">{title} @ {venue}</h2>
  <p class="flex items-center gap-1 mt-1 text-sm text-muted-foreground">
    <CalendarDays class="size-4" />
    {formattedDate}
    {startTime && (
      <>
        {" â€“ "}
        <Clock class="size-4 inline-block ml-1" />
        {startTime}
      </>
    )}
  </p>
  {artists && artists.length > 0 && (
    <p class="flex items-center gap-1 mt-1 text-sm text-muted-foreground">
      <MapPin class="size-4" />
      {artists.join(", ")}
    </p>
  )}
  <p class="mt-2 text-sm">
    {url && (
      <a href={url} class="underline underline-offset-2" target="_blank" rel="noopener noreferrer">
        More Info
      </a>
    )}
  </p>
  {sourceFile && (
    <p class="mt-2 text-xs text-muted-foreground flex items-center gap-1">
      <GitBranch class="size-4" />
      <a
        href={`https://github.com/M-Igashi/cologne-raves/edit/main/data/${sourceFile}`}
        class="underline"
        target="_blank" rel="noopener noreferrer"
      >
        Edit on GitHub
      </a>
    </p>
  )}
</article>