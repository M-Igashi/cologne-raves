---
export interface Props {
  title: string;
  description?: string;
  canonicalURL?: string;
  ogImage?: string;
  keywords?: string;
  noindex?: boolean;
}

const {
  title,
  description = "Discover the best techno and electronic music events happening this week in Cologne. Find dates, venues, lineups and ticket information for the hottest parties.",
  canonicalURL = "https://cologne.ravers.workers.dev",
  ogImage = "https://cologne.ravers.workers.dev/og-cover.png",
  keywords = "cologne raves, köln techno, electronic music cologne, techno parties köln, house music cologne, rave events cologne, nightlife cologne, clubbing köln, underground techno cologne, weekend parties cologne",
  noindex = false
} = Astro.props;

const safeTitle = title || "This Week";
const fullTitle = safeTitle.includes("Cologne Raves") ? safeTitle : `${safeTitle} | Cologne Raves`;

const currentDate = new Date().toLocaleDateString('en-US', {
  timeZone: 'Europe/Berlin',
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---
<meta charset="UTF-8">
<title>{fullTitle}</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
<meta name="description" content={description} />
<meta name="keywords" content={keywords} />

{noindex && <meta name="robots" content="noindex, nofollow" />}
{!noindex && <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:160, max-video-preview:-1" />}

<meta name="application-name" content="Cologne Raves">
<meta name="apple-mobile-web-app-title" content="Cologne Raves">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="msapplication-TileColor" content="#000000">
<meta name="author" content="Cologne Ravers WhatsApp Community">
<meta name="publisher" content="Cologne Raves">
<meta name="copyright" content="Cologne Raves Community">
<meta name="language" content="en">
<meta name="geo.region" content="DE-NW">
<meta name="geo.placename" content="Cologne">
<meta name="geo.position" content="50.937531;6.960279">
<meta name="ICBM" content="50.937531, 6.960279">

<link rel="canonical" href={canonicalURL} />

<link rel="alternate" hreflang="en" href={canonicalURL} />
<link rel="alternate" hreflang="x-default" href={canonicalURL} />

<meta property="og:title" content={fullTitle} />
<meta property="og:description" content={description} />
<meta property="og:type" content="website" />
<meta property="og:url" content={canonicalURL} />
<meta property="og:image" content={ogImage} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="Cologne Raves - Electronic Music Events" />
<meta property="og:site_name" content="Cologne Raves" />
<meta property="og:locale" content="en_US" />
<meta property="og:locale:alternate" content="de_DE" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content={fullTitle} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={ogImage} />
<meta name="twitter:image:alt" content="Cologne Raves - Electronic Music Events" />
<meta name="twitter:site" content="@CologneRaves" />
<meta name="twitter:creator" content="@CologneRaves" />

<link rel="icon" type="image/png" href="/favicon.png" />
<link rel="apple-touch-icon" href="/favicon.png" />
<link rel="shortcut icon" href="/favicon.png" />
<meta name="theme-color" content="#000000" />
<meta name="msapplication-navbutton-color" content="#000000">

<!-- JetBrains Mono from Google Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

<!-- Critical CSS Inlined for Performance -->
<style>
:root {
  --bg-primary: #000000;
  --bg-secondary: #0a0a0a;
  --bg-card: #111111;
  --text-primary: #ffffff;
  --text-secondary: #888888;
  --border: #333333;
  --border-strong: #ffffff;
  --accent-green: #00cc66;
  color-scheme: dark;
}
* { box-sizing: border-box; }
body {
  font-family: 'JetBrains Mono', monospace;
  margin: 0;
  padding: 0;
  text-align: left;
  word-wrap: break-word;
  overflow-wrap: break-word;
  font-size: 16px;
  line-height: 1.6;
  background-color: var(--bg-primary);
  color: var(--text-primary);
}
main {
  width: 720px;
  max-width: calc(100% - 2em);
  margin: auto;
  padding: 3em 1em;
}
h1, h2, h3, h4, h5, h6 {
  margin: 0 0 0.5rem 0;
  color: var(--text-primary);
  line-height: 1.2;
  text-transform: uppercase;
  letter-spacing: 2px;
}
h1 { font-size: 2rem; }
h2 { font-size: 1.5rem; }
h3 { font-size: 1.25rem; }
a { color: var(--text-primary); }
a:hover { color: var(--text-secondary); }
.text-muted-foreground { color: var(--text-secondary); }
</style>

<script type="application/ld+json" set:html={JSON.stringify({
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https://cologne.ravers.workers.dev/#website",
      "name": "Cologne Raves",
      "headline": "Cologne Electronic Music Events Guide",
      "alternateName": ["Cologne Electronic Music Events", "Köln Techno Parties", "Cologne Rave Calendar"],
      "description": "Cologne Raves is a weekly guide to the electronic music scene in Cologne, maintained by a volunteer-run WhatsApp raver community. Discover upcoming techno parties and events with this lightweight, cookie-free platform.",
      "url": "https://cologne.ravers.workers.dev/",
      "inLanguage": "en",
      "publisher": {
        "@id": "https://cologne.ravers.workers.dev/#organization"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "https://cologne.ravers.workers.dev/parties?search={search_term_string}"
        },
        "query-input": "required name=search_term_string"
      },
      "isAccessibleForFree": true
    },
    {
      "@type": "Organization",
      "@id": "https://cologne.ravers.workers.dev/#organization",
      "name": "Cologne Raves",
      "alternateName": "Cologne Ravers WhatsApp Community",
      "url": "https://cologne.ravers.workers.dev/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://cologne.ravers.workers.dev/favicon.png",
        "width": 512,
        "height": 512
      },
      "sameAs": [
        "https://github.com/M-Igashi/cologne-raves"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "Technical Support",
        "url": "https://github.com/M-Igashi/cologne-raves/issues"
      }
    },
    {
      "@type": "WebPage",
      "@id": `${canonicalURL}#webpage`,
      "url": canonicalURL,
      "name": fullTitle,
      "isPartOf": {
        "@id": "https://cologne.ravers.workers.dev/#website"
      },
      "primaryImageOfPage": {
        "@type": "ImageObject",
        "url": ogImage
      },
      "datePublished": "2024-01-01T00:00:00+01:00",
      "dateModified": new Date().toISOString(),
      "description": description,
      "breadcrumb": {
        "@id": `${canonicalURL}#breadcrumb`
      },
      "inLanguage": "en",
      "potentialAction": [{
        "@type": "ReadAction",
        "target": [canonicalURL]
      }]
    },
    {
      "@type": "BreadcrumbList",
      "@id": `${canonicalURL}#breadcrumb`,
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": {
            "@type": "Thing",
            "@id": "https://cologne.ravers.workers.dev/"
          }
        },
        ...(canonicalURL !== "https://cologne.ravers.workers.dev/" ? [{
          "@type": "ListItem",
          "position": 2,
          "name": safeTitle,
          "item": {
            "@type": "Thing",
            "@id": canonicalURL
          }
        }] : [])
      ]
    },
    {
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "What is Cologne Raves?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Cologne Raves is a community-driven platform that provides a weekly guide to electronic music events in Cologne. It's maintained by a volunteer WhatsApp raver community and offers a simple, ad-free way to discover techno parties and events."
          }
        },
        {
          "@type": "Question",
          "name": "How can I submit my event to Cologne Raves?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "You can submit your party or live show to our community calendar using the submission form on the website. The platform is open for all electronic music events happening in Cologne."
          }
        },
        {
          "@type": "Question",
          "name": "Is Cologne Raves free to use?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, Cologne Raves is completely free to use. It's a community-driven platform with no ads, no cookies, and no commercial interests."
          }
        }
      ]
    }
  ]
})} />

<!-- DNS Prefetch for External Resources -->
<link rel="dns-prefetch" href="https://static.cloudflareinsights.com">

<!-- Preconnect for Critical Third-party Origins -->
<link rel="preconnect" href="https://cloudflareinsights.com">

<!-- Performance Hints -->
<meta http-equiv="x-dns-prefetch-control" content="on">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
